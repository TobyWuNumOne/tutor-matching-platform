<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>老師藍勾勾認證付款測試</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 40px;
                background: #f5f5f5;
            }
            .container {
                max-width: 800px;
                margin: 0 auto;
                background: white;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            .form-group {
                margin: 15px 0;
            }
            label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
            }
            input,
            select {
                padding: 10px;
                width: 100%;
                border: 1px solid #ddd;
                border-radius: 5px;
                font-size: 16px;
            }
            .button {
                padding: 12px 25px;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                margin: 10px 5px;
                text-decoration: none;
                display: inline-block;
            }
            .button:hover {
                background: #0056b3;
            }
            .button.success {
                background: #28a745;
            }
            .button.success:hover {
                background: #1e7e34;
            }
            .button.premium {
                background: #6f42c1;
            }
            .button.premium:hover {
                background: #5a32a3;
            }
            .section {
                margin: 30px 0;
                padding: 20px;
                border: 1px solid #ddd;
                border-radius: 5px;
            }
            .code {
                background: #f8f9fa;
                padding: 2px 6px;
                border-radius: 3px;
                font-family: monospace;
            }
            ul {
                padding-left: 20px;
            }
            li {
                margin: 5px 0;
            }
            .badge {
                background: #6f42c1;
                color: white;
                padding: 2px 8px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>
                🔵 老師藍勾勾認證付款測試 <span class="badge">PREMIUM</span>
            </h1>

            <div class="section">
                <h2>📝 測試表單 (POST 請求)</h2>
                <form action="/api/payment/ecpay" method="post">
                    <div class="form-group">
                        <label>老師ID:</label>
                        <input
                            type="number"
                            name="teacher_id"
                            value="1"
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label>認證費用:</label>
                        <input
                            type="number"
                            name="amount"
                            value="299"
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label>老師姓名:</label>
                        <input
                            type="text"
                            name="teacher_name"
                            value="張老師"
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label>老師電話:</label>
                        <input
                            type="tel"
                            name="teacher_phone"
                            value="0912345678"
                        />
                    </div>

                    <div class="form-group">
                        <label>認證描述:</label>
                        <input
                            type="text"
                            name="description"
                            value="老師藍勾勾認證"
                            readonly
                        />
                    </div>

                    <button type="submit" class="button premium">
                        建立藍勾勾認證訂單 (POST)
                    </button>
                </form>
            </div>

            <div class="section">
                <h2>⚡ 快速測試 (GET 請求)</h2>
                <p>直接使用固定測試資料跳轉到綠界付款頁面：</p>
                <a href="/api/payment/ecpay" class="button success"
                    >直接測試認證付款 (GET)</a
                >
            </div>

            <div class="section">
                <h2>📋 API 端點說明</h2>
                <ul>
                    <li>
                        <strong>GET</strong>
                        <code class="code">/api/payment/ecpay</code> -
                        測試認證付款頁面 (固定資料)
                    </li>
                    <li>
                        <strong>POST</strong>
                        <code class="code">/api/payment/ecpay</code> -
                        建立藍勾勾認證訂單 (動態資料)
                    </li>
                    <li>
                        <strong>POST</strong>
                        <code class="code">/api/payment/result</code> -
                        接收認證付款結果 (綠界同步回傳)
                    </li>
                    <li>
                        <strong>POST</strong>
                        <code class="code">/api/payment/notify</code> -
                        接收認證付款通知 (綠界非同步通知)
                    </li>
                    <li>
                        <strong>GET</strong>
                        <code class="code"
                            >/api/payment/status/&lt;trade_no&gt;</code
                        >
                        - 查詢認證付款狀態
                    </li>
                    <li>
                        <strong>GET</strong>
                        <code class="code">/api/payment/test</code> - 測試頁面
                        (本頁面)
                    </li>
                </ul>
            </div>

            <div class="section">
                <h2>📚 Swagger 文件</h2>
                <a href="/docs/" class="button">查看完整 API 文件</a>
            </div>

            <div class="section">
                <h2>🔄 藍勾勾認證流程</h2>
                <ol>
                    <li>
                        <strong>建立認證訂單：</strong>前端發送 POST 請求到
                        <code class="code">/api/payment/ecpay</code>
                    </li>
                    <li>
                        <strong>跳轉付款：</strong
                        >系統回傳綠界付款頁面，老師完成認證費用付款
                    </li>
                    <li>
                        <strong>同步回傳：</strong>綠界即時發送付款結果到
                        <code class="code">/api/payment/result</code>
                        (ReturnURL)
                    </li>
                    <li>
                        <strong>非同步通知：</strong>綠界可靠地發送付款確認到
                        <code class="code">/api/payment/notify</code>
                        (NotifyURL)
                    </li>
                    <li>
                        <strong>啟用認證：</strong
                        >付款成功後自動啟用老師的藍勾勾認證
                    </li>
                    <li>
                        <strong>查詢狀態：</strong>可通過
                        <code class="code"
                            >/api/payment/status/&lt;trade_no&gt;</code
                        >
                        查詢
                    </li>
                </ol>

                <div
                    style="
                        background: #e8f4fd;
                        padding: 15px;
                        border-radius: 5px;
                        margin-top: 15px;
                    "
                >
                    <h4>🔔 關於 NotifyURL 與 ReturnURL 的差異：</h4>
                    <ul style="margin: 10px 0">
                        <li>
                            <strong>ReturnURL (同步回傳)：</strong
                            >用戶付款完成後即時跳轉，可能因網路問題失敗
                        </li>
                        <li>
                            <strong>NotifyURL (非同步通知)：</strong
                            >綠界主動重複發送，直到收到確認回應，更可靠
                        </li>
                        <li>
                            <strong>建議：</strong>重要的業務邏輯應在 NotifyURL
                            中處理，ReturnURL 主要用於頁面跳轉
                        </li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>💎 認證特色</h2>
                <ul>
                    <li>
                        🔵 <strong>藍勾勾標誌：</strong>獲得平台官方認證標章
                    </li>
                    <li>
                        ⭐ <strong>提升信任度：</strong>增加學生對老師的信任
                    </li>
                    <li>📈 <strong>優先推薦：</strong>在搜尋結果中優先顯示</li>
                    <li>💰 <strong>一次付費：</strong>永久享有認證身份</li>
                </ul>
            </div>
        </div>
    </body>
</html>
